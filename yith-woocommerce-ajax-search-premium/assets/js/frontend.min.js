jQuery(document).ready(function(l){"use strict";var e=l(".yith-s"),a="undefined"!=typeof woocommerce_params&&void 0!==woocommerce_params.ajax_loader_url?woocommerce_params.ajax_loader_url:yith_wcas_params.loading,t=""==e.data("loader-icon")?a:e.data("loader-icon"),p=e.data("min-chars");e.each(function(){var o=l(this),r=o.closest("form"),n=!1,i=r.find(".search_categories"),s=r.find(".yit_wcas_post_type"),e=r.find("#yith-searchsubmit"),c=0<r.find('[name="lang"]').length?r.find('[name="lang"]').val():"",d=void 0===o.data("append-to")?o.closest(".yith-ajaxsearchform-container"):o.closest(o.data("append-to")),a=yith_wcas_params.ajax_url.toString().replace("%%endpoint%%","yith_ajax_search_products");e.on("click",function(){if(i.length)r.submit();else if(""==r.find(".yith-s").val())return!1;return!0}),o.yithautocomplete({minChars:p,maxHeight:"auto",appendTo:d,triggerSelectOnValidInput:!1,serviceUrl:a+"&post_type="+s.val()+"&lang="+c+"&action=yith_ajax_search_products",onSearchStart:function(){o.css({"background-image":"url("+t+")","background-repeat":"no-repeat","background-position":"center right"})},onSearchComplete:function(){o.css("background-image","none"),l(window).trigger("resize"),o.trigger("focus")},onSelect:function(e){-1!=e.id&&(window.location.href=e.url)},beforeRender:function(){if("true"==yith_wcas_params.show_all&&n){var e={s:o.val(),post_type:r.find(".yit_wcas_post_type").val()};0<r.find(".search_categories").length&&(e.product_cat=r.find(".search_categories").val());var a=r.attr("action"),t=-1!==a.indexOf("?")?"&":"?",i='<div class="link-result"><a href="'+(a+t+l.param(e))+'">'+yith_wcas_params.show_all_text+"</a></div>";d.find(".autocomplete-suggestions").append(i)}},transformResult:function(e){return e="string"==typeof e?l.parseJSON(e):e,n=e.results,e},formatResult:function(e,a){var t="("+l.YithAutocomplete.utils.escapeRegExChars(a)+")",i="";return void 0!==e.img&&(i+=e.img),i+='<div class="yith_wcas_result_content"><div class="title">',i+=e.value.replace(new RegExp(t,"gi"),"<strong>$1</strong>"),i+="</div>",void 0!==e.sku&&(i+=e.sku),void 0!==e.product_categories&&(i+=" "+e.product_categories),void 0!==e.div_badge_open&&(i+=e.div_badge_open),void 0!==e.on_sale&&(i+=e.on_sale),void 0!==e.outofstock&&(i+=e.outofstock),void 0!==e.featured&&(i+=e.featured),void 0!==e.div_badge_close&&(i+=e.div_badge_close),void 0!==e.price&&""!=e.price&&(i+=" "+yith_wcas_params.price_label+" "+e.price),void 0!==e.excerpt&&(i+=" "+e.excerpt.replace(new RegExp(t,"gi"),"<strong>$1</strong>")),i+="</div>"}}),i.length&&i.on("change",function(e){var a=o.yithautocomplete(),t=yith_wcas_params.ajax_url.toString().replace("%%endpoint%%","yith_ajax_search_products");""!=i.val()?a.setOptions({serviceUrl:t+"&product_cat="+i.val()+"&lang="+c}):a.setOptions({serviceUrl:t+"&lang="+c}),a.hide(),a.onValueChange()}),s.length&&("any"==s.val()?i.attr("disabled","disabled"):i.removeAttr("disabled"),s.on("change",function(e){var a=o.yithautocomplete(),t=yith_wcas_params.ajax_url.toString().replace("%%endpoint%%","yith_ajax_search_products");"any"==s.val()?i.attr("disabled","disabled"):i.removeAttr("disabled"),""!=s.val()?a.setOptions({serviceUrl:t+"&post_type="+s.val()+"&lang="+c}):a.setOptions({serviceUrl:t+"&lang="+c}),a.hide(),a.onValueChange()}))})});